<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞–±–ª–∏—Ü–∞ –∞–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–æ–≤ - –ü—Ä–∏—ë–º–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É html2pdf -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
        body {
            font-family: Arial, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã */
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            font-family: Arial, sans-serif;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-size: 14px;
        }
        
        th, td {
            border: 1px solid #333;
            padding: 8px 6px;
            text-align: center;
            vertical-align: middle;
        }
        
        th {
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
        }
        
        .header-main {
            background-color: #2196F3;
            font-size: 1.1em;
        }
        
        .header-sub {
            background-color: #FFC107;
            color: #333;
        }
        
        .row-label {
            background-color: #f2f2f2;
            font-weight: bold;
            text-align: left;
        }
        
        .group-title {
            background-color: #e0e0e0;
            font-weight: bold;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
        .button-container {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-bottom: 20px;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .btn-success {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
        h2 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è PDF-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
        #pdf-content {
            background-color: white;
            padding: 20px;
            overflow-x: auto;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö */
        .sample-data {
            background-color: #e8f5e9;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
        }
        
        .sample-data p {
            margin: 5px 0;
            color: #2e7d32;
        }
        
        /* –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π */
        .direction-code {
            font-weight: bold;
            color: #1565C0;
        }
        .direction-note {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            text-align: left;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –∫–Ω–æ–ø–∫–∞–º–∏ (–ù–ï –≤—Ö–æ–¥–∏—Ç –≤ PDF) -->
        <div class="button-container">
            <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ø–∏—Å–∫—É —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (–∑–∞–≥–ª—É—à–∫–∞) -->
            <a href="#">
                <button class="btn btn-primary">üë• –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ø–∏—Å–∫—É —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</button>
            </a>
            <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è PDF -->
            <button class="btn btn-success" onclick="downloadPDF()">üì• –°–∫–∞—á–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –≤ PDF</button>
        </div>
        
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è PDF (–≤–∫–ª—é—á–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ç–∞–±–ª–∏—Ü—É) -->
        <div id="pdf-content">
            <h2>üìã –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∞–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–æ–≤ (–±–∞–ª–ª—ã, —Å–æ–≥–ª–∞—Å–∏—è, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã)</h2>
            
            <table>
                <thead>
                    <tr>
                        <th rowspan="2">ID</th>
                        <th colspan="4">–°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ (0-4)</th>
                        <th colspan="4">–ë–∞–ª–ª—ã –ï–ì–≠</th>
                        <th colspan="4">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã (1-4)</th>
                    </tr>
                    <tr>
                        <!-- –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è —Å–æ–≥–ª–∞—Å–∏–π -->
                        <th>–ü–ú</th>
                        <th>–ò–í–¢</th>
                        <th>–ò–¢–°–°</th>
                        <th>–ò–ë</th>
                        <!-- –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –±–∞–ª–ª–æ–≤ -->
                        <th>–†—É—Å—Å–∫–∏–π</th>
                        <th>–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</th>
                        <th>–§–∏–∑–∏–∫–∞/–ò–ö–¢</th>
                        <th>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</th>
                        <!-- –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ -->
                        <th>–ü–ú</th>
                        <th>–ò–í–¢</th>
                        <th>–ò–¢–°–°</th>
                        <th>–ò–ë</th>
                    </tr>
                </thead>
                <tbody>
                    {% for student in students %}
                    <tr>
                        <td>{{ student.student_id }}</td>
                        <!-- –°–æ–≥–ª–∞—Å–∏—è: 1 - –¥–∞, 0 - –Ω–µ—Ç -->
                        {% if student.agreement1 == 0 %}
                        <td> </td>
                        {% else %}
                        <td>‚úÖ</td>
                        {% endif %}
                        {% if student.agreement2 == 0 %}
                        <td> </td>
                        {% else %}
                        <td>‚úÖ</td>
                        {% endif %}
                        {% if student.agreement3 == 0 %}
                        <td> </td>
                        {% else %}
                        <td>‚úÖ</td>
                        {% endif %}
                        {% if student.agreement4 == 0 %}
                        <td> </td>
                        {% else %}
                        <td>‚úÖ</td>
                        {% endif %}
                        <!-- –ë–∞–ª–ª—ã -->
                        <td>{{ student.ball_rus }}</td>
                        <td>{{ student.ball_mat }}</td>
                        <td>{{ student.ball_pro }}</td>
                        <td>{{ student.ball_ind }}</td>
                        <!-- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã: 1 - –ü–ú, 2 - –ò–í–¢, 3 - –ò–¢–°–°, 0 - –ò–ë -->
                        {% if student.priority1 == 0 %}
                        <td> </td>
                        {% else %}
                        <td>{{ student.priority1 }}</td>
                        {% endif %}
                        {% if student.priority2 == 0 %}
                        <td> </td>
                        {% else %}
                        <td>{{ student.priority2 }}</td>
                        {% endif %}
                        {% if student.priority3 == 0 %}
                        <td> </td>
                        {% else %}
                        <td>{{ student.priority3 }}</td>
                        {% endif %}
                        {% if student.priority4 == 0 %}
                        <td> </td>
                        {% else %}
                        <td>{{ student.priority4 }}</td>
                        {% endif %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            
            <!-- –ë–ª–æ–∫ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π (–≤ —Å—Ç–∏–ª–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞) -->
            <div style="margin-top: 30px;">
                <table style="width: 60%; margin: 0 auto;">
                    <thead>
                        <tr>
                            <th>–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å</th>
                            <th>–ü–ú</th>
                            <th>–ò–í–¢</th>
                            <th>–ò–¢–°–°</th>
                            <th>–ò–ë</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="row-label">–û–±—â–µ–µ –∫–æ–ª-–≤–æ –∑–∞—è–≤–ª–µ–Ω–∏–π</td>
                            <td>{{k_pm}}</td>
                            <td>{{k_ivt}}</td>
                            <td>{{k_itss}}</td>
                            <td>{{k_ib}}</td>
                        </tr>
                        <tr>
                            <td class="row-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç –Ω–∞ –û–ü</td>
                            <td>40</td>
                            <td>50</td>
                            <td>30</td>
                            <td>20</td>
                        </tr>
                        <tr class="group-title">
                            <td colspan="5">üìù –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞—è–≤–ª–µ–Ω–∏–π –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º (1-–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)</td>
                        </tr>
                        <tr>
                            <td class="row-label">–ö–æ–ª-–≤–æ –∑–∞—è–≤–ª–µ–Ω–∏–π 1-–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞</td>
                            <td>{{ priority1_pm }}</td>
                            <td>{{ priority1_ivt }}</td>
                            <td>{{ priority1_itss }}</td>
                            <td>{{ priority1_ib }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- –ü–æ—è—Å–Ω–µ–Ω–∏–µ –∫ –¥–∞–Ω–Ω—ã–º -->
        <div class="sample-data">
            <p><strong>üìä –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –∞–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–æ–≤ (10 –∑–∞–ø–∏—Å–µ–π):</strong></p>
            <p>‚Ä¢ –°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ: 1 - –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ–¥–∞–Ω—ã, 0 - –Ω–µ –ø–æ–¥–∞–Ω—ã.</p>
            <p>‚Ä¢ –ë–∞–ª–ª—ã –ï–ì–≠: —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫, –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, —Ñ–∏–∑–∏–∫–∞/–ò–ö–¢ (–ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç).</p>
            <p>‚Ä¢ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã: –æ—Ç 1 (–Ω–∞–∏–≤—ã—Å—à–∏–π) –¥–æ 4 (–Ω–∞–∏–Ω–∏–∑—à–∏–π). 0 –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–∞ –¥–∞–Ω–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –ø–æ–¥–∞–≤–∞–ª–∏—Å—å.</p>
            <p>‚Ä¢ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è: –ü–ú, –ò–í–¢, –ò–¢–°–°, –ò–ë.</p>
        </div>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã –≤ PDF
        function downloadPDF() {
            // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏ —Ç–∞–±–ª–∏—Ü–µ–π
            const element = document.getElementById('pdf-content');
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è PDF
            const opt = {
                margin:        [0.5, 0.5, 0.5, 0.5], // –æ—Ç—Å—Ç—É–ø—ã: –≤–µ—Ä—Ö, –ø—Ä–∞–≤–æ, –Ω–∏–∑, –ª–µ–≤–æ (–≤ –¥—é–π–º–∞—Ö)
                filename:     'tablica_abiturientov.pdf',
                image:        { type: 'jpeg', quality: 0.98 },
                html2canvas:  { scale: 2, letterRendering: true },
                jsPDF:        { unit: 'in', format: 'a4', orientation: 'landscape' } // –∞–ª—å–±–æ–º–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —à–∏—Ä–æ–∫–æ–π —Ç–∞–±–ª–∏—Ü—ã
            };
            
            // –°–∫–∞—á–∏–≤–∞–µ–º PDF
            html2pdf().set(opt).from(element).save();
        }
    </script>
</body>
</html>